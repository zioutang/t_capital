module.exports=function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.SingleImgView=void 0;var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(1),u=n(l),h=i(2),c=n(h),p=i(3),d=n(p),f=i(4),b=i(5),y=n(b);i(6);var m=40,g=function(t){function e(t){o(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return i.initScale=1,i.screenWidth=window.innerWidth||window.screen.availWidth,i.screenHeight=window.innerHeight||window.screen.availHeight,i.list=null,i.ob=null,i.focused=null,i.arrLength=t.imagelist.length,i.state={current:t.current},i}return r(e,t),a(e,[{key:"render",value:function(){var t=this;return u.default.createElement("div",{className:"imageview"},u.default.createElement(c.default,{onSingleTap:this.onSingleTap.bind(this),onPressMove:this.onPressMove.bind(this),onSwipe:this.onSwipe.bind(this)},u.default.createElement("ul",{id:"imagelist",ref:"imagelist",className:"imagelist"},this.props.imagelist.map(function(e,i){return u.default.createElement("li",{className:"imagelist-item",key:"img"+i},u.default.createElement(c.default,{onPressMove:t.onPicPressMove.bind(t),onMultipointStart:t.onMultipointStart.bind(t),onLongTap:t.onLongTap.bind(t),onPinch:t.onPinch.bind(t),onRotate:t.onRotate.bind(t),onMultipointEnd:t.onMultipointEnd.bind(t),onDoubleTap:t.onDoubleTap.bind(t)},u.default.createElement(f.CenterImage,{id:"view"+i,className:"imagelist-item-img",lazysrc:e,index:i,current:t.state.current})))}))),this.props.disablePageNum?null:u.default.createElement("div",{className:"page"},this.state.current+1," / ",this.arrLength))}},{key:"componentDidMount",value:function(){var t=this.state.current;this.arrLength=this.props.imagelist.length,this.list=this.refs.imagelist,this.ob=document.getElementById("view"+t),(0,d.default)(this.list),t&&this.changeIndex(t,!1),this.ob&&(0,d.default)(this.ob)}},{key:"onSingleTap",value:function(){this.props.close&&this.props.close()}},{key:"onPressMove",value:function(t){var e=this.state.current;this.endAnimation(),this.focused||(0===e&&t.deltaX>0||e===this.arrLength-1&&t.deltaX<0?this.list.translateX+=t.deltaX/3:this.list.translateX+=t.deltaX),t.preventDefault()}},{key:"onPicPressMove",value:function(t){this.endAnimation();var e=t.deltaX,i=t.deltaY;this.ob&&this.checkInArea(e,i)?(this.ob.translateX+=e,this.ob.translateY+=i,this.focused=!0):this.focused=!1}},{key:"onSwipe",value:function(t){var e=t.direction,i=this.state.current;if(this.focused)return!1;switch(e){case"Left":i<this.arrLength-1&&++i&&this.bindStyle(i);break;case"Right":i>0&&i--&&this.bindStyle(i)}this.changeIndex(i)}},{key:"onMultipointStart",value:function(){this.endAnimation()}},{key:"onPinch",value:function(t){return!this.props.disablePinch&&(this.ob.scaleX=this.ob.scaleY=this.initScale*t.scale,void(this.ob.style.webkitTransition="cubic-bezier(.15,.01,.88,1)"))}},{key:"onRotate",value:function(t){return!this.props.disableRotate&&(this.ob.rotateZ+=t.angle,void(this.ob.style.webkitTransition="cubic-bezier(.15,.01,.88,1)"))}},{key:"onLongTap",value:function(){this.props.longTap&&this.props.longTap()}},{key:"onMultipointEnd",value:function(t){if(this.changeIndex(this.state.current),this.ob){this.ob.scaleX<1&&this.setScale(1),this.ob.scaleX>2&&this.setScale(2);var e=this.ob.rotateZ%360,i=this.ob.getAttribute("rate");e<0&&(e=360+e),this.ob.rotateZ=e,e>0&&e<45?(this.ob.rotateZ=0,this.setScale(1)):e>=315?(this.ob.rotateZ=360,this.setScale(1)):e>=45&&e<135?(this.ob.rotateZ=90,this.setScale(i)):e>=135&&e<225?(this.ob.rotateZ=180,this.setScale(1)):e>=225&&e<315&&(this.ob.rotateZ=270,this.setScale(i))}}},{key:"onDoubleTap",value:function(t){if(this.props.disableDoubleTap)return!1;var e=t.origin,i=e[0]-this.screenWidth/2-document.body.scrollLeft,n=e[1]-this.screenHeight/2-document.body.scrollTop;1===this.ob.scaleX?(this.ob.translateX=this.ob.originX=i,this.ob.translateY=this.ob.originY=n,this.setScale(2)):(this.ob.translateX=this.ob.originX,this.ob.translateY=this.ob.originY,this.setScale(1))}},{key:"bindStyle",value:function(t){var e=this;this.setState({current:t},function(){e.ob&&e.restore(),e.ob=document.getElementById("view"+t),e.ob&&!e.ob.scaleX&&(0,d.default)(e.ob)})}},{key:"changeIndex",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e&&(this.list.style.webkitTransition="300ms ease"),this.list.translateX=-t*(this.screenWidth+m)}},{key:"setScale",value:function(t){this.ob.style.webkitTransition="300ms ease-in-out",this.ob.scaleX=this.ob.scaleY=t}},{key:"restore",value:function(){this.ob.translateX=this.ob.translateY=0,this.ob.rotateZ=0,this.ob.scaleX=this.ob.scaleY=1,this.ob.originX=this.ob.originY=0}},{key:"endAnimation",value:function(){this.list.style.webkitTransition="0",this.ob&&this.ob.style&&(this.ob.style.webkitTransition="0")}},{key:"checkInArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.ob,n=i.scaleX,o=i.translateX,s=i.translateY,r=i.originX,a=i.originY,l=this.ob.getAttribute("rate");if(1!==n||n!==l){var u=(n-1)*this.screenWidth/2+r,h=-(n-1)*this.screenWidth/2+r,c=(n-1)*this.screenHeight/2+a,p=-(n-1)*this.screenHeight/2+a;if(o-r+t<=u&&o-r+t>=h&&s-a+e<=c&&s-a+e>=p)return!0}return!1}}]),e}(l.Component);g.defaultProps={current:0,disablePageNum:!1},g.propTypes={current:u.default.PropTypes.number,imagelist:u.default.PropTypes.array.isRequired,disablePageNum:u.default.PropTypes.bool,disablePinch:u.default.PropTypes.bool,disableRotate:u.default.PropTypes.bool,disableDoubleTap:u.default.PropTypes.bool,longTap:u.default.PropTypes.func,close:u.default.PropTypes.func.isRequired};e.SingleImgView=new y.default(g);e.default=g},function(t,e){t.exports=require("react")},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),l=i(1),u=n(l),h=function(t){function e(t){o(this,e);var i=s(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.preV={x:null,y:null},i.pinchStartLen=null,i.scale=1,i.isDoubleTap=!1,i.delta=null,i.last=null,i.now=null,i.end=null,i.multiTouch=!1,i.tapTimeout=null,i.longTapTimeout=null,i.singleTapTimeout=null,i.swipeTimeout=null,i.x1=i.x2=i.y1=i.y2=null,i.preTapPosition={x:null,y:null},i}return r(e,t),a(e,[{key:"getLen",value:function(t){return Math.sqrt(t.x*t.x+t.y*t.y)}},{key:"dot",value:function(t,e){return t.x*e.x+t.y*e.y}},{key:"getAngle",value:function(t,e){var i=this.getLen(t)*this.getLen(e);if(0===i)return 0;var n=this.dot(t,e)/i;return n>1&&(n=1),Math.acos(n)}},{key:"cross",value:function(t,e){return t.x*e.y-e.x*t.y}},{key:"getRotateAngle",value:function(t,e){var i=this.getAngle(t,e);return this.cross(t,e)>0&&(i*=-1),180*i/Math.PI}},{key:"_resetState",value:function(){this.setState({x:null,y:null,swiping:!1,start:0})}},{key:"_emitEvent",value:function(t){if(this.props[t]){for(var e,i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];(e=this.props)[t].apply(e,n)}}},{key:"_handleTouchStart",value:function(t){var e=this;if(t.touches){this.now=Date.now(),this.x1=t.touches[0].pageX,this.y1=t.touches[0].pageY,this.delta=this.now-(this.last||this.now),null!==this.preTapPosition.x&&(this.isDoubleTap=this.delta>0&&this.delta<=250&&Math.abs(this.preTapPosition.x-this.x1)<30&&Math.abs(this.preTapPosition.y-this.y1)<30),this.preTapPosition.x=this.x1,this.preTapPosition.y=this.y1,this.last=this.now;var i=this.preV,n=t.touches.length;if(n>1){this._cancelLongTap(),this._cancelSingleTap();var o={x:t.touches[1].pageX-this.x1,y:t.touches[1].pageY-this.y1};i.x=o.x,i.y=o.y,this.pinchStartLen=this.getLen(i),this._emitEvent("onMultipointStart",t)}this.longTapTimeout=setTimeout(function(){e._emitEvent("onLongTap",t)},750)}}},{key:"_handleTouchMove",value:function(t){var e=this.preV,i=t.touches.length,n=t.touches[0].pageX,o=t.touches[0].pageY;if(this.isDoubleTap=!1,i>1){var s={x:t.touches[1].pageX-n,y:t.touches[1].pageY-o};null!==e.x&&(this.pinchStartLen>0&&(t.scale=this.getLen(s)/this.pinchStartLen,this._emitEvent("onPinch",t)),t.angle=this.getRotateAngle(s,e),this._emitEvent("onRotate",t)),e.x=s.x,e.y=s.y,this.multiTouch=!0}else null!==this.x2?(t.deltaX=n-this.x2,t.deltaY=o-this.y2):(t.deltaX=0,t.deltaY=0),this._emitEvent("onPressMove",t);this._cancelLongTap(),this.x2=n,this.y2=o,i>1&&t.preventDefault()}},{key:"_handleTouchCancel",value:function(){clearInterval(this.singleTapTimeout),clearInterval(this.tapTimeout),clearInterval(this.longTapTimeout),clearInterval(this.swipeTimeout)}},{key:"_handleTouchEnd",value:function(t){var e=this;this.end=Date.now(),this._cancelLongTap(),t.touches.length<2&&this._emitEvent("onMultipointEnd",t),t.origin=[this.x1,this.y1],this.multiTouch===!1&&(this.x2&&Math.abs(this.x1-this.x2)>30||this.y2&&Math.abs(this.preV.y-this.y2)>30?(t.direction=this._swipeDirection(this.x1,this.x2,this.y1,this.y2),t.distance=Math.abs(this.x1-this.x2),this.swipeTimeout=setTimeout(function(){e._emitEvent("onSwipe",t)},0)):this.tapTimeout=setTimeout(function(){e._emitEvent("onTap",t),e.isDoubleTap?(e._emitEvent("onDoubleTap",t),clearTimeout(e.singleTapTimeout),e.isDoubleTap=!1):e.singleTapTimeout=setTimeout(function(){e._emitEvent("onSingleTap",t)},250)},0)),this.preV.x=0,this.preV.y=0,this.scale=1,this.pinchStartLen=null,this.x1=this.x2=this.y1=this.y2=null,this.multiTouch=!1}},{key:"_cancelLongTap",value:function(){clearTimeout(this.longTapTimeout)}},{key:"_cancelSingleTap",value:function(){clearTimeout(this.singleTapTimeout)}},{key:"_swipeDirection",value:function(t,e,i,n){return Math.abs(t-e)>80||this.end-this.now<250?Math.abs(t-e)>=Math.abs(i-n)?t-e>0?"Left":"Right":i-n>0?"Up":"Down":"Nochange"}},{key:"render",value:function(){return u.default.cloneElement(u.default.Children.only(this.props.children),{onTouchStart:this._handleTouchStart.bind(this),onTouchMove:this._handleTouchMove.bind(this),onTouchCancel:this._handleTouchCancel.bind(this),onTouchEnd:this._handleTouchEnd.bind(this)})}}]),e}(l.Component);e.default=h},function(t,e){"use strict";function i(t,e,i){for(var o=0,s=e.length;o<s;o++){var r=e[o];n(t,r,i)}}function n(t,e,i){Object.defineProperty(t,e,{get:function(){return this["__"+e]},set:function(t){t!==this["__"+e]&&(this["__"+e]=t,i())}})}var o=function(t,e,i,n,o,s,r,a,l,u,h,c,p,d,f,b){this.elements=window.Float32Array?new Float32Array(16):[];var y=this.elements;y[0]=void 0!==t?t:1,y[4]=e||0,y[8]=i||0,y[12]=n||0,y[1]=o||0,y[5]=void 0!==s?s:1,y[9]=r||0,y[13]=a||0,y[2]=l||0,y[6]=u||0,y[10]=void 0!==h?h:1,y[14]=c||0,y[3]=p||0,y[7]=d||0,y[11]=f||0,y[15]=void 0!==b?b:1};o.DEG_TO_RAD=Math.PI/180,o.prototype={set:function(t,e,i,n,o,s,r,a,l,u,h,c,p,d,f,b){var y=this.elements;return y[0]=t,y[4]=e,y[8]=i,y[12]=n,y[1]=o,y[5]=s,y[9]=r,y[13]=a,y[2]=l,y[6]=u,y[10]=h,y[14]=c,y[3]=p,y[7]=d,y[11]=f,y[15]=b,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},multiplyMatrices:function(t,e){var i=t.elements,n=this.elements,o=i[0],s=i[4],r=i[8],a=i[12],l=i[1],u=i[5],h=i[9],c=i[13],p=i[2],d=i[6],f=i[10],b=i[14],y=i[3],m=i[7],g=i[11],v=i[15],T=e[0],_=e[1],w=e[2],x=e[3],k=e[4],M=e[5],P=e[6],E=e[7],S=e[8],X=e[9],O=e[10],D=e[11],Y=e[12],L=e[13],A=e[14],j=e[15];return n[0]=o*T+s*k+r*S+a*Y,n[4]=o*_+s*M+r*X+a*L,n[8]=o*w+s*P+r*O+a*A,n[12]=o*x+s*E+r*D+a*j,n[1]=l*T+u*k+h*S+c*Y,n[5]=l*_+u*M+h*X+c*L,n[9]=l*w+u*P+h*O+c*A,n[13]=l*x+u*E+h*D+c*j,n[2]=p*T+d*k+f*S+b*Y,n[6]=p*_+d*M+f*X+b*L,n[10]=p*w+d*P+f*O+b*A,n[14]=p*x+d*E+f*D+b*j,n[3]=y*T+m*k+g*S+v*Y,n[7]=y*_+m*M+g*X+v*L,n[11]=y*w+m*P+g*O+v*A,n[15]=y*x+m*E+g*D+v*j,this},_rounded:function(t,e){return e=Math.pow(10,e||15),Math.round(t*e)/e},appendTransform:function(t,e,i,n,s,r,a,l,u,h,c,p,d,f){var b=a*o.DEG_TO_RAD,y=this._rounded(Math.cos(b)),m=this._rounded(Math.sin(b)),g=l*o.DEG_TO_RAD,v=this._rounded(Math.cos(g)),T=this._rounded(Math.sin(g)),_=u*o.DEG_TO_RAD,w=this._rounded(Math.cos(_*-1)),x=this._rounded(Math.sin(_*-1));return this.multiplyMatrices(this,[1,0,0,t,0,y,m,e,0,-m,y,i,0,0,0,1]),this.multiplyMatrices(this,[v,0,T,0,0,1,0,0,-T,0,v,0,0,0,0,1]),this.multiplyMatrices(this,[w*n,x*s,0,0,-x*n,w*s,0,0,0,0,1*r,0,0,0,0,1]),(h||c)&&this.multiplyMatrices(this,[this._rounded(Math.cos(h*o.DEG_TO_RAD)),this._rounded(Math.sin(h*o.DEG_TO_RAD)),0,0,-1*this._rounded(Math.sin(c*o.DEG_TO_RAD)),this._rounded(Math.cos(c*o.DEG_TO_RAD)),0,0,0,0,1,0,0,0,0,1]),(p||d||f)&&(this.elements[12]-=p*this.elements[0]+d*this.elements[4]+f*this.elements[8],this.elements[13]-=p*this.elements[1]+d*this.elements[5]+f*this.elements[9],this.elements[14]-=p*this.elements[2]+d*this.elements[6]+f*this.elements[10]),this}};var s=function(t){i(t,["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","rotateX","rotateY","rotateZ","skewX","skewY","originX","originY","originZ"],function(){var e=t.matrix3D.identity().appendTransform(t.translateX,t.translateY,t.translateZ,t.scaleX,t.scaleY,t.scaleZ,t.rotateX,t.rotateY,t.rotateZ,t.skewX,t.skewY,t.originX,t.originY,t.originZ);t.style.transform=t.style.msTransform=t.style.OTransform=t.style.MozTransform=t.style.webkitTransform="perspective("+t.perspective+"px) matrix3d("+Array.prototype.slice.call(e.elements).join(",")+")"}),i(t,["perspective"],function(){t.style.transform=t.style.msTransform=t.style.OTransform=t.style.MozTransform=t.style.webkitTransform="perspective("+t.perspective+"px) matrix3d("+Array.prototype.slice.call(t.matrix3D.elements).join(",")+")"}),t.matrix3D=new o,t.perspective=500,t.scaleX=t.scaleY=t.scaleZ=1,t.translateX=t.translateY=t.translateZ=t.rotateX=t.rotateY=t.rotateZ=t.skewX=t.skewY=t.originX=t.originY=t.originZ=0};t.exports=s},function(t,e,i){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var i={};for(var n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n]);return i}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.CenterImage=void 0;var l=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},u=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),h=i(1),c=n(h),p=3,d=(e.CenterImage=function(t){function e(){var t,i,n,o;s(this,e);for(var a=arguments.length,l=Array(a),u=0;u<a;u++)l[u]=arguments[u];return i=n=r(this,(t=e.__proto__||Object.getPrototypeOf(e)).call.apply(t,[this].concat(l))),n.state={loading:!0,error:!1,loaded:!1},o=i,r(n,o)}return a(e,t),u(e,[{key:"render",value:function(){var t=this.state,e=t.loading,i=t.error,n=this.props,s=n.index,r=n.current,a=n.lazysrc,u=o(n,["index","current","lazysrc"]),h=c.default.createElement("img",l({onLoad:this.onImgLoad.bind(this),src:a},u));return s===r?h:e?c.default.createElement(d,null):i?c.default.createElement(f,null):h}},{key:"componentWillMount",value:function(){this.loadImg()}},{key:"componentWillReceiveProps",value:function(t){!this.state.loaded&&this.loadImg()}},{key:"loadImg",value:function(){var t=this,e=this.props,i=e.index,n=e.current,o=e.lazysrc;if(o&&i<=n+p&&i>=n-p){var s=new Image;s.src=o,s.onload=function(){t.setState({loading:!1})},s.onerror=function(){t.setState({loading:!1,error:!0})}}}},{key:"onImgLoad",value:function(t){this.setState({loaded:!0});var e=t.target,i=e.naturalHeight,n=e.naturalWidth,o=i/n,s=window.innerHeight||window.screen.availHeight,r=window.innerWidth||window.screen.availWidth,a=s/r,l={};o>a?(l.height=s+"px",l.width=n*s/i+"px",l.left=r/2-n*s/i/2+"px"):o<a?(l.width=r+"px",l.height=i*r/n+"px",l.top=s/2-i*r/n/2+"px"):(l.width=r,l.height=s),e.setAttribute("style","width:"+l.width+"; height:"+l.height+"; left:"+l.left+"; top:"+l.top+";"),e.setAttribute("rate",1/o)}}]),e}(h.Component),function(){return c.default.createElement("div",{className:"spinner"},c.default.createElement("div",{className:"double-bounce1"}),c.default.createElement("div",{className:"double-bounce2"}))}),f=function(){return c.default.createElement("div",{className:"errorpage"},"加载失败")}},function(t,e){t.exports=require("react-singleton")},function(t,e){}]);